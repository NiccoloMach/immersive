<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Immersive Workshop</title>
        <meta charset="utf-8">
        <meta property="og:title" content="Immersive Workshop"/>
        <meta property="og:type" content="website"/>
        <meta property="og:image" content="https://immersive.marpi.pl/assets/image.jpg"/>
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                margin: 0px;
                overflow: hidden;
                background-color: #000000;
            }
        </style>
    </head>
    <body>

        <script src="js/third-party/threejs/three.js"></script>
        <script src="js/third-party/threejs/WebVR.js"></script>
        <script src="js/third-party/threejs/effects/VREffect.js"></script>
        <script src="js/third-party/threejs/effects/StereoEffect.js"></script>

        <script src="js/third-party/threejs/controls/VRControls.js"></script>
        <script src="js/third-party/threejs/controls/DeviceOrientationControls.js"></script>
        <script src="js/third-party/threejs/controls/OrbitControls.js"></script>
        
        <script src="js/third-party/TweenMax.min.js"></script>
        <script src="js/third-party/dat.gui.min.js"></script>
        
        <script src="js/utils/helpers.js"></script>

        <script>
            var gui = new dat.GUI();
            var guiControl = new function(){
                this.rotationX = 0.01;
                this.rotationY = 0.01;
                this.rotationZ = 0.01;
                this.p = 1;
                this.q = 1;
            }
            
            gui.add(guiControl, 'rotationX', 0, 1);
            gui.add(guiControl, 'rotationY', 0, 1);
            gui.add(guiControl, 'rotationZ', 0, 1);
            gui.add(guiControl, 'p', 0, 20);
            gui.add(guiControl, 'q', 0, 20);

            // setup scene and camera
            var scene = new THREE.Scene();
            var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

            // setup render to screen
            var renderer = new THREE.WebGLRenderer();
            renderer.setClearColor(0xdddddd);
            renderer.setSize( window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMapSoft = true;
            document.body.appendChild(renderer.domElement);

            // light

            var light = new THREE.DirectionalLight(0xffffff);
            light.position.set(1, 1.5, 0.5);
            scene.add(light);


            // position camera
            camera.position.z = 5;

            // controls
            var controls = new THREE.OrbitControls(camera);
            // controls.autoRotate = true;


            // Helpers
            var axis = new THREE.AxisHelper(10);
            scene.add(axis);

            var grid = new THREE.GridHelper(50,5);
            var color = new THREE.Color("rgb(255,0,0)");
            // grid.setColors(color, 0x000000);
            // scene.add(grid);

            // setup cube and add to scene
            var geometry = new THREE.BoxGeometry(1,1,1);
            var material = new THREE.MeshLambertMaterial({color: 0xff00ff});
            var cube = new THREE.Mesh(geometry, material);
            cube.castShadow = true;
            scene.add(cube);
            
            p = guiControl.p;
            q = guiControl.q;

            // setup torus and add to scene
            var torusGeometry = new THREE.TorusKnotGeometry(0.64, 0.25, 25, 6, 15, 15);
            var torusMaterial = new THREE.MeshLambertMaterial({color: 0xff00ff});
            var torus = new THREE.Mesh(torusGeometry, torusMaterial);
            torus.position.set(1,1,1);
            torus.castShadow = true;
            scene.add(torus);



            // run 60 times per second
            function render(){
                requestAnimationFrame(render);
                // controls.update();

                cube.rotation.x += guiControl.rotationX;
                cube.rotation.y += guiControl.rotationY;
                cube.rotation.z += guiControl.rotationZ;
                
                torusGeometry.parameters.p += guiControl.p;
                torusGeometry.parameters.q += guiControl.q;
                torusGeometry.verticesNeedUpdate = true;

                renderer.render(scene,camera);
            };

            render();

        </script>
    </body>
</html>